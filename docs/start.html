<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>第 2 章 开始shell脚本编程 | Linux Shell 脚本编写指南</title>
  <meta name="description" content="这是春晖翻译的Linux Shell 脚本编写指南，用以记录本人学习Linux Shell Scripting Tutorial (LSST) v2.0的历程" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="第 2 章 开始shell脚本编程 | Linux Shell 脚本编写指南" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://http://xuchunhui.top" />
  <meta property="og:image" content="http://xuchunhui.top/images/favicon.png" />
  <meta property="og:description" content="这是春晖翻译的Linux Shell 脚本编写指南，用以记录本人学习Linux Shell Scripting Tutorial (LSST) v2.0的历程" />
  <meta name="github-repo" content="ChevyXu/Linux_Shell_Script" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="第 2 章 开始shell脚本编程 | Linux Shell 脚本编写指南" />
  
  <meta name="twitter:description" content="这是春晖翻译的Linux Shell 脚本编写指南，用以记录本人学习Linux Shell Scripting Tutorial (LSST) v2.0的历程" />
  <meta name="twitter:image" content="http://xuchunhui.top/images/favicon.png" />

<meta name="author" content="Written by Vivek Gite" />
<meta name="author" content="Translated by Chunhui" />


<meta name="date" content="2020-09-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon" />
<link rel="prev" href="intro.html"/>

<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Linux Shell 脚本编写指南</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface 前言</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#authors"><i class="fa fa-check"></i>Authors &amp; Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Linux快速介绍</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#linux是什么"><i class="fa fa-check"></i><b>1.1</b> Linux是什么</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#谁创建了linux"><i class="fa fa-check"></i><b>1.2</b> 谁创建了Linux</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#在哪里下载linux"><i class="fa fa-check"></i><b>1.3</b> 在哪里下载Linux</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#如何安装linux"><i class="fa fa-check"></i><b>1.4</b> 如何安装Linux</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#什么是linux-kernel"><i class="fa fa-check"></i><b>1.5</b> 什么是Linux Kernel</a></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#什么是linux-shell"><i class="fa fa-check"></i><b>1.6</b> 什么是Linux Shell</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="intro.html"><a href="intro.html#shell是什么"><i class="fa fa-check"></i><b>1.6.1</b> Shell是什么</a></li>
<li class="chapter" data-level="1.6.2" data-path="intro.html"><a href="intro.html#命令提示符-shell-prompt"><i class="fa fa-check"></i><b>1.6.2</b> 命令提示符 (Shell Prompt)</a></li>
<li class="chapter" data-level="1.6.3" data-path="intro.html"><a href="intro.html#如何知道我现在有哪些shell"><i class="fa fa-check"></i><b>1.6.3</b> 如何知道我现在有哪些shell</a></li>
<li class="chapter" data-level="1.6.4" data-path="intro.html"><a href="intro.html#命令行界面-command-line-interface-cli"><i class="fa fa-check"></i><b>1.6.4</b> 命令行界面 (Command Line Interface, CLI)</a></li>
<li class="chapter" data-level="1.6.5" data-path="intro.html"><a href="intro.html#基本的命令行操作"><i class="fa fa-check"></i><b>1.6.5</b> 基本的命令行操作</a></li>
<li class="chapter" data-level="1.6.6" data-path="intro.html"><a href="intro.html#执行一个命令"><i class="fa fa-check"></i><b>1.6.6</b> 执行一个命令</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="intro.html"><a href="intro.html#unix的哲学"><i class="fa fa-check"></i><b>1.7</b> UNIX的哲学</a></li>
<li class="chapter" data-level="1.8" data-path="intro.html"><a href="intro.html#什么是shell脚本"><i class="fa fa-check"></i><b>1.8</b> 什么是shell脚本</a></li>
<li class="chapter" data-level="1.9" data-path="intro.html"><a href="intro.html#为什么使用shell脚本"><i class="fa fa-check"></i><b>1.9</b> 为什么使用shell脚本</a>
<ul>
<li class="chapter" data-level="1.9.1" data-path="intro.html"><a href="intro.html#特性"><i class="fa fa-check"></i><b>1.9.1</b> 特性:</a></li>
<li class="chapter" data-level="1.9.2" data-path="intro.html"><a href="intro.html#常见的应用场景"><i class="fa fa-check"></i><b>1.9.2</b> 常见的应用场景:</a></li>
<li class="chapter" data-level="1.9.3" data-path="intro.html"><a href="intro.html#优势"><i class="fa fa-check"></i><b>1.9.3</b> 优势:</a></li>
<li class="chapter" data-level="1.9.4" data-path="intro.html"><a href="intro.html#劣势"><i class="fa fa-check"></i><b>1.9.4</b> 劣势:</a></li>
<li class="chapter" data-level="1.9.5" data-path="intro.html"><a href="intro.html#学习目标"><i class="fa fa-check"></i><b>1.9.5</b> 学习目标</a></li>
</ul></li>
<li class="chapter" data-level="1.10" data-path="intro.html"><a href="intro.html#本章节复习题"><i class="fa fa-check"></i><b>1.10</b> 本章节复习题</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="start.html"><a href="start.html"><i class="fa fa-check"></i><b>2</b> 开始shell脚本编程</a>
<ul>
<li class="chapter" data-level="2.1" data-path="start.html"><a href="start.html#bash-shell全称bourne-again-shell"><i class="fa fa-check"></i><b>2.1</b> Bash shell（全称Bourne again shell）</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="start.html"><a href="start.html#bash的提升特性"><i class="fa fa-check"></i><b>2.1.1</b> BASH的提升特性</a></li>
<li class="chapter" data-level="2.1.2" data-path="start.html"><a href="start.html#作者"><i class="fa fa-check"></i><b>2.1.2</b> 作者</a></li>
<li class="chapter" data-level="2.1.3" data-path="start.html"><a href="start.html#下载"><i class="fa fa-check"></i><b>2.1.3</b> 下载</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="start.html"><a href="start.html#shell命令"><i class="fa fa-check"></i><b>2.2</b> shell命令</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="start.html"><a href="start.html#bash和命令类型"><i class="fa fa-check"></i><b>2.2.1</b> bash和命令类型</a></li>
<li class="chapter" data-level="2.2.2" data-path="start.html"><a href="start.html#type命令"><i class="fa fa-check"></i><b>2.2.2</b> type命令</a></li>
<li class="chapter" data-level="2.2.3" data-path="start.html"><a href="start.html#bash命令关键词以及内置命令"><i class="fa fa-check"></i><b>2.2.3</b> bash命令关键词以及内置命令</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="start.html"><a href="start.html#hello-world-第一个shell脚本"><i class="fa fa-check"></i><b>2.3</b> Hello, World! 第一个shell脚本</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="start.html"><a href="start.html#shebang"><i class="fa fa-check"></i><b>2.3.1</b> Shebang</a></li>
<li class="chapter" data-level="2.3.2" data-path="start.html"><a href="start.html#shell注释"><i class="fa fa-check"></i><b>2.3.2</b> Shell注释</a></li>
<li class="chapter" data-level="2.3.3" data-path="start.html"><a href="start.html#设置脚本权限"><i class="fa fa-check"></i><b>2.3.3</b> 设置脚本权限</a></li>
<li class="chapter" data-level="2.3.4" data-path="start.html"><a href="start.html#脚本debug"><i class="fa fa-check"></i><b>2.3.4</b> 脚本debug</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="start.html"><a href="start.html#本章节复习题-1"><i class="fa fa-check"></i><b>2.4</b> 本章节复习题</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="start.html"><a href="start.html#练习题1"><i class="fa fa-check"></i><b>2.4.1</b> 练习题1</a></li>
<li class="chapter" data-level="2.4.2" data-path="start.html"><a href="start.html#练习题2"><i class="fa fa-check"></i><b>2.4.2</b> 练习题2</a></li>
<li class="chapter" data-level="2.4.3" data-path="start.html"><a href="start.html#练习题3"><i class="fa fa-check"></i><b>2.4.3</b> 练习题3</a></li>
<li class="chapter" data-level="2.4.4" data-path="start.html"><a href="start.html#练习题4"><i class="fa fa-check"></i><b>2.4.4</b> 练习题4</a></li>
<li class="chapter" data-level="2.4.5" data-path="start.html"><a href="start.html#练习题5"><i class="fa fa-check"></i><b>2.4.5</b> 练习题5</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="http://xuchunhui.top" target="blank">Chunhui's Blog</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Linux Shell 脚本编写指南</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="start" class="section level1" number="2">
<h1><span class="header-section-number">第 2 章</span> 开始shell脚本编程</h1>
<p>本章节学习目标：</p>
<ul>
<li><p>编写你第一个shell 程序</p></li>
<li><p>理解创建一个shell脚本的步骤</p></li>
</ul>
<div id="bash-shell全称bourne-again-shell" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Bash shell（全称Bourne again shell）</h2>
<blockquote>
<p>有关bash的创建历史（来自<a href="https://zh.wikipedia.org/zh-hans/Bash">维基百科</a>）：</p>
<p><a href="https://zh.wikipedia.org/wiki/Bourne_shell">Bourne shell</a>是一个交互式的shell，由AT&amp;T实验室的史蒂夫在1977年发布，位于大多数Unix系统上的/bin/sh，随着时间的发展，<a href="https://zh.wikipedia.org/wiki/GNU">GNU</a>计划的诞生伴随着shell的开发，这个时候1987年布莱恩编写了Bash，也就是Bourne again shell，总的来说，Bash虽然是一个满足POSIX规范的shell，但有很多拓展。</p>
</blockquote>
<p>Bash就是shell，或者可以说是Linux系统的命令语言解释器：</p>
<ul>
<li>Bash式<a href="https://bash.cyberciti.biz/guide/GNU">GNU</a>计划的产物</li>
<li>Linux的默认shell</li>
<li>反向兼容UNIX系统的sh</li>
<li>与Korn shell(ksh)以及C shell(csh)兼容</li>
<li>在多平台类似UNIX/dos/Windows都是可运行多个</li>
</ul>
<div id="bash的提升特性" class="section level3" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> BASH的提升特性</h3>
<ul>
<li>命令行编辑</li>
<li>命令行补全</li>
<li>无限大小的命令历史</li>
<li>提示控制</li>
<li>不限大小的array</li>
<li>以2-64为基数的整数运算</li>
<li>……</li>
</ul>
</div>
<div id="作者" class="section level3" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> 作者</h3>
<ul>
<li>Brian J. Fox authored the <a href="https://bash.cyberciti.biz/guide/GNU">GNU</a> <a href="https://bash.cyberciti.biz/guide/Bash">Bash</a> <a href="https://bash.cyberciti.biz/guide/Shell">shell</a>, in 1987.</li>
<li>Fox maintained <a href="https://bash.cyberciti.biz/guide/Bash">Bash</a> as the primary maintainer until 1993, at which point Chet Ramey took over.</li>
<li>Chet Ramey is the current maintainer of the GNU Bourne Again Shell and GNU Readline.</li>
</ul>
</div>
<div id="下载" class="section level3" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> 下载</h3>
<ul>
<li>bash式Linux的默认shell，最新版本可以在<a href="https://ftp.gnu.org/gnu/bash/">official website</a>下载</li>
<li><a href="https://www.gnu.org/software/bash/bash.html">Bash home page</a></li>
<li><a href="https://cnswww.cns.cwru.edu/php/chet/">Chet’s home page</a></li>
</ul>
</div>
</div>
<div id="shell命令" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> shell命令</h2>
<p>bash shell有两种类型的命令：</p>
<ol style="list-style-type: decimal">
<li>内置命令</li>
<li>外部命令（在bin/目录里面的命令）</li>
</ol>
<div id="bash和命令类型" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> bash和命令类型</h3>
<p>bash接受以下几种类型的命令：</p>
<ul>
<li>别名（例如<code>ll</code>）</li>
<li>关键词（例如<code>if</code>）</li>
<li>函数（例如<code>genpassword</code>）</li>
<li>内置命令（例如<code>pwd</code>）</li>
<li>文件（例如/bin/date)</li>
</ul>
</div>
<div id="type命令" class="section level3" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> type命令</h3>
<p>找出某个命令(ls)是内置命令还是外部命令：</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="start.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span> ls</span></code></pre></div>
<pre><code>## ls is /usr/bin/ls</code></pre>
<p>找出某个命令(command)是内置命令还是外部命令：</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="start.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span> -a history</span></code></pre></div>
<pre><code>## history is a shell builtin</code></pre>
</div>
<div id="bash命令关键词以及内置命令" class="section level3" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> bash命令关键词以及内置命令</h3>
<ul>
<li><a href="https://bash.cyberciti.biz/guide/JOB_SPEC_%26">JOB_SPEC &amp;</a></li>
<li><a href="https://bash.cyberciti.biz/guide/((_expression_))">(( expression ))</a></li>
<li><a href="https://bash.cyberciti.biz/guide/._filename">. filename</a></li>
<li>[[:]]</li>
<li>[ arg… ]</li>
<li><a href="https://bash.cyberciti.biz/guide/Expression">expression</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Alias">alias</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Bg">bg</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Bind">bind</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Builtin">builtin</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Caller&amp;action=edit&amp;redlink=1">caller</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Case&amp;action=edit&amp;redlink=1">case</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Command">command</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Compgen&amp;action=edit&amp;redlink=1">compgen</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Complete&amp;action=edit&amp;redlink=1">complete</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Continue">continue</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Declare">declare</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Dirs">dirs</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Disown">disown</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Echo&amp;action=edit&amp;redlink=1">echo</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Enable&amp;action=edit&amp;redlink=1">enable</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Eval">eval</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Exec&amp;action=edit&amp;redlink=1">exec</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Exit&amp;action=edit&amp;redlink=1">exit</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Export&amp;action=edit&amp;redlink=1">export</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=False&amp;action=edit&amp;redlink=1">false</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Fc&amp;action=edit&amp;redlink=1">fc</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Fg">fg</a></li>
<li><a href="https://bash.cyberciti.biz/guide/For">for</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Getopts">getopts</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Hash&amp;action=edit&amp;redlink=1">hash</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Help&amp;action=edit&amp;redlink=1">help</a></li>
<li><a href="https://bash.cyberciti.biz/guide/History">history</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=If&amp;action=edit&amp;redlink=1">if</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Jobs">jobs</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Kill&amp;action=edit&amp;redlink=1">kill</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Let&amp;action=edit&amp;redlink=1">let</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Local&amp;action=edit&amp;redlink=1">local</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Logout">logout</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Popd">popd</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Printf">printf</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Pushd">pushd</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Pwd&amp;action=edit&amp;redlink=1">pwd</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Read">read</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Readonly&amp;action=edit&amp;redlink=1">readonly</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Return">return</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Select">select</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Set">set</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Shift">shift</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Shopt">shopt</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Source&amp;action=edit&amp;redlink=1">source</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Suspend">suspend</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Test">test</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Time&amp;action=edit&amp;redlink=1">time</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Times&amp;action=edit&amp;redlink=1">times</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Trap&amp;action=edit&amp;redlink=1">trap</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=True&amp;action=edit&amp;redlink=1">true</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Type&amp;action=edit&amp;redlink=1">type</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Typeset">typeset</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Ulimit">ulimit</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Umask">umask</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Unalias&amp;action=edit&amp;redlink=1">unalias</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Unset">unset</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=Until&amp;action=edit&amp;redlink=1">until</a></li>
<li><a href="https://bash.cyberciti.biz/guide/Variables">variables</a></li>
<li><a href="https://bash.cyberciti.biz/wiki/index.php?title=While&amp;action=edit&amp;redlink=1">while</a></li>
</ul>
</div>
</div>
<div id="hello-world-第一个shell脚本" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Hello, World! 第一个shell脚本</h2>
<p>创建一个shell脚本你需要经过以下几个步骤：</p>
<ol style="list-style-type: decimal">
<li>利用一个文本编辑器（例如vi），将你的指令写入一个文本</li>
<li>保存该文本并退出</li>
<li>改变该文本的可执行权限</li>
<li>测试该脚本并放入你的生产环境</li>
<li>最简单的shell脚本就是一行代码告诉计算机执行一个命令</li>
</ol>
<p>让我们来熟悉vi的操作并创建第一个shell script</p>
<pre><code># 打开一个文件
vi first_script.sh

# 进入编辑模式
# 按Esc键，然后按I键就进入编辑模式

# 进入命令模式
# 按Esc键就进入命令模式

# 保存文件
# 按Esc键然后输入:w
# 或者按Esc键然后输入:w first_script.sh

# 保存并退出文件
# 按Esc键然后输入:wq
# 或者按Esc键然后输入:x

# 跳到某一行
# 按Esc键然后输入:x, x代表第几行

# 搜索一个字符
# 按Esc键然后输入/str, str代表该字符

# 退出vi（不保存）
# 按Esc键然后输入:q</code></pre>
<pre class="shell"><code># 让我们来编辑第一个脚本，输入以下字符并保存退出
#!/bin/bash
echo &quot;Hello, World!&quot; 
echo &quot;Knowledge is power.&quot;

# 将该文件改为可以执行文件并执行
new@Chevy-PC:~$ chmod 777 first_script.sh
new@Chevy-PC:~$ ./first_script.sh
Hello, World!
Knowledge is power.</code></pre>
<div id="shebang" class="section level3" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Shebang</h3>
<p>在脚本的第一行，我们需要告诉系统用哪种程序来运行这个脚本，写法为<code>#!/path_to_binaries</code>，我们一般称其为Shebang或者bang行<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></p>
<p>在bash脚本里面第一行我们一般写成<code>#!/bin/bash</code>，有些程序使用<code>perl</code>来运行的话，就写成<code>#!/bin/perl</code></p>
<p>一个<code>#!/bin.sh</code>的脚本示例：</p>
<pre class="shell"><code>etc/init.d/policykit
#! /bin/sh
### BEGIN INIT INFO
# Provides:          policykit
# Required-Start:    $local_fs
# Required-Stop:     $local_fs
# Default-Start:     2 3 4 5
# Default-Stop:
# Short-Description: Create PolicyKit runtime directories
# Description:       Create directories which PolicyKit needs at runtime,
#                    such as /var/run/PolicyKit
### END INIT INFO

# Author: Martin Pitt &lt;martin.pitt@ubuntu.com&gt;

case &quot;$1&quot; in
  start)
        mkdir -p /var/run/PolicyKit
        chown root:polkituser /var/run/PolicyKit
        chmod 770 /var/run/PolicyKit
    ;;
  stop|restart|force-reload)
    ;;
  *)
    echo &quot;Usage: $SCRIPTNAME {start|stop|restart|force-reload}&quot; &gt;&amp;2
    exit 3
    ;;
esac

:</code></pre>
</div>
<div id="shell注释" class="section level3" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Shell注释</h3>
<p>在脚本里面<code>#</code>号后面的代码会被忽略，这行代码我们成为注释，注释可以帮助我们理解代码并且便于修改：</p>
<pre class="shell"><code>#!/bin/bash
# A Simple Shell Script To Get Linux Network Information
# Vivek Gite - 30/Aug/2009
echo &quot;Current date : $(date) @ $(hostname)&quot;
echo &quot;Network configuration&quot;
/sbin/ifconfig</code></pre>
<p>多行注释可以使用<a href="https://bash.cyberciti.biz/guide/Here_documents">HERE DOCUMENT</a> 特性来进行注释：</p>
<pre class="shell"><code>#!/bin/bash
echo &quot;Adding new users to LDAP Server...&quot;
&lt;&lt;COMMENT1
    Master LDAP server : dir1.nixcraft.net.in 
    Add user to master and it will get sync to backup server too
    Profile and active directory hooks are below
COMMENT1
echo &quot;Searching for user...&quot;</code></pre>
</div>
<div id="设置脚本权限" class="section level3" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> 设置脚本权限</h3>
<p>一个刚编辑完的脚本无法直接执行，你需要使用<code>chmod</code>命令给与其可执行权限或者直接调用对应的命令来执行，下面的操作具有同样的效果：</p>
<pre class="shell"><code>chmod +x script.sh &amp;&amp; ./script.sh
chmod 777 script.sh &amp;&amp; ./script.sh

sh script.sh</code></pre>
<p>使用<code>ls -l</code>可以查看一个文件的权限：</p>
<pre class="shell"><code>new@Chevy-PC:~$ ls -l first.sh
-rwxrwxrwx 1 new new 61 Jul 15 14:24 first.sh</code></pre>
<p>更多<code>chomd</code>的操作可以使用<code>man chmod</code>查看</p>
<blockquote>
<p>为什么不直接使用 <code>scriptname</code> 来调用脚本？为什么当工作目录<code>$PWD</code>正好是<code>scriptname</code> 所在目录时也不起作用？因为一些安全原因，当前目录<code>./</code>并不会被默认添加到用户的$PATH路径中。因此需要用户显式使用 ./scriptname 在当前目录下调用脚本。</p>
</blockquote>
</div>
<div id="脚本debug" class="section level3" number="2.3.4">
<h3><span class="header-section-number">2.3.4</span> 脚本debug</h3>
<p>在运行脚本的时候需要加上<code>-x</code>参数或者<code>-xv</code>参数，又或者是将shebang行改成<code>#!/bin.bash-x</code></p>
<div id="使用内置命令" class="section level4" number="2.3.4.1">
<h4><span class="header-section-number">2.3.4.1</span> 使用内置命令</h4>
<p>bash shell提供了debug选项，可以使用<code>set</code>命令打开或者关闭：</p>
<ul>
<li><code>set -x</code>：当脚本被执行的时候展示命令及参数</li>
<li><code>set -v</code>：当脚本被读入的时候展示输入行</li>
<li><code>set -n</code>：读入命令但不执行（在检查脚本是否有变量名重合的时候）</li>
</ul>
<pre class="shell"><code>#!/bin/bash
### Turn on debug mode ###
set -x

# Run shell commands
echo &quot;Hello $(LOGNAME)&quot;
echo &quot;Today is $(date)&quot;
echo &quot;Users currently on the machine, and their processes:&quot;

### Turn OFF debug mode ###
set +x

# Add more commands without debug mode</code></pre>
<pre class="shell"><code>#!/bin/bash
set -n # only read command but do not execute them
set -o noexec
echo &quot;This is a test&quot;
# no file is created as bash will only read commands but do not executes them </code></pre>
</div>
</div>
</div>
<div id="本章节复习题-1" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> 本章节复习题</h2>
<div id="练习题1" class="section level3" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> 练习题1</h3>
<p>按照下面代码写一个脚本并运行，观察输出：</p>
<pre class="shell"><code># Script to print currently logged in users information, and current date &amp; time.
clear
echo &quot;Hello $USER&quot;
echo -e &quot;Today is \c &quot;;date
echo -e &quot;Number of user login : \c&quot; ; who | wc -l
echo &quot;Calendar&quot;
cal
exit 0</code></pre>
<p>​ 输出结果：</p>
<pre class="shell"><code>Hello new
Today is Tue Jul 16 15:34:58 CST 2019
Number of user login : 0
Calendar
     July 2019
Su Mo Tu We Th Fr Sa
    1  2  3  4  5  6
 7  8  9 10 11 12 13
14 15 16 17 18 19 20
21 22 23 24 25 26 27
28 29 30 31</code></pre>
</div>
<div id="练习题2" class="section level3" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> 练习题2</h3>
<p>写一个程序，打印出你最喜欢的电影名称，同时在下一行打印出导演的名称（<strong>以下是我自己的答案</strong>）：</p>
<pre class="shell"><code>#!/bin/bash
# print moive and director

set -e

my_favorite_moive=&quot;gone_with_the_wind&quot;

moive_director=&quot;not_known&quot;

echo -e &quot;my_favorite_moive is \c&quot;; 
echo $my_favorite_moive
echo -e &quot;the moive&#39;s director is \c&quot;; 
echo $moive_director

exit 0</code></pre>
</div>
<div id="练习题3" class="section level3" number="2.4.3">
<h3><span class="header-section-number">2.4.3</span> 练习题3</h3>
<p>写一个shell脚本，打印你的名字，在用户按<ENTER>键之前保持等待状态：</p>
<pre class="shell"><code>#!/bin/bash
echo &quot;Vivek Gite&quot;
read -p &quot;Press [Enter] key to continue...&quot; fakeEnterKey</code></pre>
</div>
<div id="练习题4" class="section level3" number="2.4.4">
<h3><span class="header-section-number">2.4.4</span> 练习题4</h3>
<p>列出十个内置命令和外部命令:</p>
<pre class="shell"><code># builtin commands
history
break
cd
continue
eval
exit
grep
kill

# external commands
ls
gzip</code></pre>
</div>
<div id="练习题5" class="section level3" number="2.4.5">
<h3><span class="header-section-number">2.4.5</span> 练习题5</h3>
<p>使用<code>cd</code>命令进入/etc/init.d目录下，查看各种系统启动脚本：</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb31-1"><a href="start.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /etc/init.d/</span>
<span id="cb31-2"><a href="start.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span></span></code></pre></div>
<pre><code>## apparmor
## apport
## atd
## console-setup.sh
## cron
## cryptdisks
## cryptdisks-early
## dbus
## hwclock.sh
## irqbalance
## iscsid
## keyboard-setup.sh
## kmod
## lvm2
## lvm2-lvmpolld
## multipath-tools
## open-iscsi
## open-vm-tools
## plymouth
## plymouth-log
## procps
## rsync
## rsyslog
## screen-cleanup
## ssh
## udev
## ufw
## unattended-upgrades
## uuidd
## x11-common</code></pre>

</div>
</div>
</div>







<div class="footnotes">
<hr />
<ol start="2">
<li id="fn2"><p><a href="http://www.sbcl.org/manual/index.html#Shebang-Scripts">SBCL - Shebang Scripts</a><a href="start.html#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/02_Start_Shell.Rmd",
"text": "编辑"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown.pdf", "bookdown.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
